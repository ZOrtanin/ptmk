1. Архитектура

	Язык и фреймворки: Python, SQLAlchemy (ORM), Faker (генерация данных), SQLite (база данных).

	Структура:
	main.py — основной файл с логикой запуска и обработки аргументов командной строки.
	database.py — класс для работы с базой данных.
	models.py — модель данных (таблица people).

	Подход: 
	Объектно-ориентированный, с использованием классов для представления сотрудников и работы с БД.

2. Реализация режимов работы
	1. Создание таблицы
		Команда: myApp 1
		Действие: Создаёт таблицу people с полями: id, fio, birth_date, gender.
		Результат: Таблица успешно создаётся при первом запуске.


	2. Добавление записи
		Команда: myApp 2 "Ivanov Petr Sergeevich" 2009-07-12 Male
		Логика:
		- Парсинг аргументов, создание объекта Person.
		- Транслитерация ФИО (если требуется).
		- Пакетная вставка в БД.
		Особенности: Обработка неполных данных.
		Методы класса: расчёт возраста, отправка объекта в БД.


	3. Вывод всех записей
		Команда: myApp 3
		Логика: Получение всех записей, сортировка по fio.	
		Вывод: ФИО, дата рождения, пол, возраст.
		Результат: Данные выводятся в отсортированном виде.


	4. Автоматическое заполнение
		Команда: myApp 4 1
		Логика:
		Генерация 1,000,000 записей с равномерным распределением пола и начальных букв ФИО.
		
		Команда: myApp 4 0
		Дополнительно: 100 записей с мужским полом и фамилией на "F".
		Пакетная вставка в БД.
	

	5. Выборка по критерию
		Команда: myApp 5
		Логика:
		Поиск мужчин с фамилией на "F".
		Замер времени выполнения запроса.
		-----------------
		Результат до оптимизации: ~0.18 – 0.16 секунды на 1,000,000 записей.


	6. Оптимизация запросов
		Действия:
		Добавлен индекс на поле fio и gender для ускорения поиска по начальной букве.
		Использование "сырого" SQL-запроса (dataGetRaw) для ускорения выборки.
		-----------------
		Результат после оптимизации: ~0.08–0.04 секунды.

	7. Проверка оптимизации
		Команда: myApp 5
		Результат: Время выполнения уменьшилось в 3–4 раза.


3. Технические детали
	Модель данных

	Таблица people:
		id (INT, PRIMARY KEY)
		fio (STRING, NOT NULL)
		birth_date (DATE, NOT NULL)
		gender (STRING, NOT NULL)

	Методы класса Person:
		getAge() — расчёт возраста.
		to_dict() - для удобства.
		to_string() — форматированный вывод.

	Работа с БД
		SQLAlchemy:
		Сессии для транзакций.
		Пакетная вставка (bulk_save_objects).
		Фильтрация и сортировка через ORM.

	Генерация данных		
		Генерация реалистичных ФИО(Faker) , дат рождения, пола.
		Транслитерация для английского языка.

	Тестирование (End-to-End)
		Для обеспечения стабильности и корректности работы приложения были реализованы end-to-end (e2e) тесты с использованием библиотеки pytest и модуля subprocess. Эти тесты проверяют взаимодействие всех компонентов приложения, имитируя реальные сценарии использования через командную строку.
		
		```bash
		pytest test/e2e.py -v
		```


4. Результаты тестирования

	Время выполнения запросов
	до оптимизации ....... 0.16 – 0.18 сек
	после оптимизации .... 0.08 – 0.04 сек
	Выборка мужчин с "F" ~ 1000000 строк в базе

	Объяснение оптимизации
	Индекс на fio и gender : Ускоряет поиск по начальной букве и гендеру.
	Сырой SQL-запрос: Минует ORM-надстройки, ускоряя выполнение.


5. Выводы и рекомендации
	Выводы
		Проект успешно реализует все требования задания.
		Оптимизация запросов значительно ускорила работу с большими данными.
		Код структурирован и легко расширяем.

	Рекомендации по улучшению проекта:
		Стабильность
			Добавить логирование ошибок:
			python Copyimport logging
			logging.basicConfig(filename='app.log', level=logging.ERROR)
			Написать автоматические тесты (например, с pytest).

		Удобный интерфейс
			Использовать как пример argparse для парсинга аргументов:
			Copyparser = argparse.ArgumentParser(description='Управление справочником сотрудников.')
			parser.add_argument('mode', type=int, help='Режим работы (1-7)')
			parser.add_argument('--fio', help='ФИО сотрудника')


		Расширение функционала
			- Добавить сортировку в методы запросов
			- Реализовать генерацию ФИО с заданной буквой
			- Добавить конфигурационный файл (например, config.json) для гибкой настройки.
			- Реализовать экспорт/импорт данных в CSV/JSON.
